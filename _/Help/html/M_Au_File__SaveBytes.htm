<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>File_.SaveBytes Method </title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="SaveBytes method" /><meta name="System.Keywords" content="File_.SaveBytes method" /><meta name="Microsoft.Help.F1" content="Au.File_.SaveBytes" /><meta name="Microsoft.Help.Id" content="M:Au.File_.SaveBytes(System.String,System.Byte[],System.Boolean,System.Int32)" /><meta name="Description" content="Writes data to a file in a safe way, using System.IO.File.WriteAllBytes." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="Au" /><meta name="file" content="M_Au_File__SaveBytes" /><meta name="guid" content="M_Au_File__SaveBytes" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-3.3.1.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Au Class Library<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html\3d4fd35d-4b48-4167-b34f-44e9afc13fc3.htm" title="Au Class Library" tocid="roottoc">Au Class Library</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/N_Au.htm" title="Au" tocid="N_Au">Au</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/T_Au_File_.htm" title="File_ Class" tocid="T_Au_File_">File_ Class</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/Methods_T_Au_File_.htm" title="File_ Methods" tocid="Methods_T_Au_File_">File_ Methods</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__Copy.htm" title="Copy Method " tocid="M_Au_File__Copy">Copy Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__CopyTo.htm" title="CopyTo Method " tocid="M_Au_File__CopyTo">CopyTo Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__CreateDirectory.htm" title="CreateDirectory Method " tocid="M_Au_File__CreateDirectory">CreateDirectory Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__CreateDirectoryFor.htm" title="CreateDirectoryFor Method " tocid="M_Au_File__CreateDirectoryFor">CreateDirectoryFor Method </a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/Overload_Au_File__Delete.htm" title="Delete Method " tocid="Overload_Au_File__Delete">Delete Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__EnumDirectory.htm" title="EnumDirectory Method " tocid="M_Au_File__EnumDirectory">EnumDirectory Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__ExistsAs.htm" title="ExistsAs Method " tocid="M_Au_File__ExistsAs">ExistsAs Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__ExistsAs2.htm" title="ExistsAs2 Method " tocid="M_Au_File__ExistsAs2">ExistsAs2 Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__ExistsAsAny.htm" title="ExistsAsAny Method " tocid="M_Au_File__ExistsAsAny">ExistsAsAny Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__ExistsAsDirectory.htm" title="ExistsAsDirectory Method " tocid="M_Au_File__ExistsAsDirectory">ExistsAsDirectory Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__ExistsAsFile.htm" title="ExistsAsFile Method " tocid="M_Au_File__ExistsAsFile">ExistsAsFile Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__GetAttributes.htm" title="GetAttributes Method " tocid="M_Au_File__GetAttributes">GetAttributes Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__GetProperties.htm" title="GetProperties Method " tocid="M_Au_File__GetProperties">GetProperties Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__LoadBytes.htm" title="LoadBytes Method " tocid="M_Au_File__LoadBytes">LoadBytes Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__LoadText.htm" title="LoadText Method " tocid="M_Au_File__LoadText">LoadText Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__Move.htm" title="Move Method " tocid="M_Au_File__Move">Move Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__MoveTo.htm" title="MoveTo Method " tocid="M_Au_File__MoveTo">MoveTo Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__Rename.htm" title="Rename Method " tocid="M_Au_File__Rename">Rename Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__Save.htm" title="Save Method " tocid="M_Au_File__Save">Save Method </a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__SaveBytes.htm" title="SaveBytes Method " tocid="M_Au_File__SaveBytes">SaveBytes Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__SaveText.htm" title="SaveText Method " tocid="M_Au_File__SaveText">SaveText Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="../html/M_Au_File__SearchPath.htm" title="SearchPath Method " tocid="M_Au_File__SearchPath">SearchPath Method </a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="../html/Overload_Au_File__WaitIfLocked.htm" title="WaitIfLocked Method " tocid="Overload_Au_File__WaitIfLocked">WaitIfLocked Method </a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn"><h1>File_<span id="LST246FDF94_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST246FDF94_0?cpp=::|nu=.");</script>SaveBytes Method </h1></td></tr></table><span class="introStyle"></span> <div class="summary">
            Writes data to a file in a safe way, using <a href="http://msdn2.microsoft.com/en-us/library/46fkawb5" target="_blank">System.IO.File.WriteAllBytes</a>.
            </div><p> </p>
    <strong>Namespace:</strong> 
   <a href="N_Au.htm">Au</a><br />
    <strong>Assembly:</strong>
   Au (in Au.dll) Version: 1.0.0.0<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID1RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EACA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EACA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EACA');return false;" title="Copy">Copy</a></div></div><div id="ID0EACA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="identifier">SaveBytes</span>(
	<span class="identifier">string</span> <span class="parameter">file</span>,
	<span class="identifier">byte</span>[] <span class="parameter">bytes</span>,
	<span class="identifier">bool</span> <span class="parameter">backup</span> = <span class="keyword">false</span>,
	<span class="identifier">int</span> <span class="parameter">lockedWaitMS</span> = 2000
)</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EACA");</script><h4 class="subHeading">Parameters</h4><dl><dt><span class="parameter">file</span></dt><dd>Type: <a href="http://msdn2.microsoft.com/en-us/library/s1wwdcbf" target="_blank">System<span id="LST246FDF94_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST246FDF94_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>String</a><br />File. Must be full path. Can contain environment variables etc, see <a href="M_Au_Path__ExpandEnvVar.htm">Path_.ExpandEnvVar</a>. The file can exist or not; this function overwrites it.</dd><dt><span class="parameter">bytes</span></dt><dd>Type: <span id="LST246FDF94_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST246FDF94_2?cpp=array&lt;");</script><a href="http://msdn2.microsoft.com/en-us/library/yyb1w04y" target="_blank">System<span id="LST246FDF94_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST246FDF94_3?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Byte</a><span id="LST246FDF94_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST246FDF94_4?cpp=&gt;|vb=()|nu=[]");</script><br />Data to write.</dd><dt><span class="parameter">backup</span> (Optional)</dt><dd>Type: <a href="http://msdn2.microsoft.com/en-us/library/a28wyd50" target="_blank">System<span id="LST246FDF94_5"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST246FDF94_5?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Boolean</a><br />Create backup file named file + "~backup".</dd><dt><span class="parameter">lockedWaitMS</span> (Optional)</dt><dd>Type: <a href="http://msdn2.microsoft.com/en-us/library/td2s409d" target="_blank">System<span id="LST246FDF94_6"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST246FDF94_6?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Int32</a><br />If cannot open file because it is open by another process etc, wait max this number of milliseconds. Can be <a href="http://msdn2.microsoft.com/en-us/library/65fh19xy" target="_blank">System.Threading.Timeout.Infinite</a> (-1).</dd></dl></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Exceptions</span></div><div id="ID2RBSection" class="collapsibleSection"><div class="tableSection"><table><tr><th>Exception</th><th>Condition</th></tr><tr><td><a href="http://msdn2.microsoft.com/en-us/library/3w1b3114" target="_blank">ArgumentException</a></td><td>Not full path.</td></tr><tr><td><a href="http://msdn2.microsoft.com/en-us/library/c18k6c59" target="_blank">Exception</a></td><td>Exceptions of the file-write function.</td></tr><tr><td><a href="http://msdn2.microsoft.com/en-us/library/hccy4eyd" target="_blank">IOException</a></td><td>Failed to replace file. The file-write function also can thow it.</td></tr></table></div></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Remarks</span></div><div id="ID3RBSection" class="collapsibleSection">            The file-write functions provided by .NET and Windows API are unreliable, because:<br />            1. Fails if the file is temporarily open by another process or thread without sharing.<br />            2. Can corrupt file data. If this thread, process, PC or disk dies while writing, may write only part of data or just make empty file. Usually it happens when PC is turned off incorrectly.<br /><br />            To protect from 1, this functions waits/retries if the file is temporarily open/locked, like <a href="M_Au_File__WaitIfLocked.htm">File_.WaitIfLocked</a>.<br />            To protect from 2, this function writes to a temporary file and renames/replaces the specified file using API <a href="https://www.google.com/search?q=site:docs.microsoft.com+ReplaceFile" target="_blank">ReplaceFile</a>. Although not completely atomic, it ensures that file data is not corrupt; if cannot write all data, does not change existing file data.
            </div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID4RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="T_Au_File_.htm">File_ Class</a></div><div class="seeAlsoStyle"><a href="N_Au.htm">Au Namespace</a></div></div></div></div><div id="pageFooter" class="pageFooter"> </div></body></html>