<Project Sdk="Microsoft.NET.Sdk.WindowsDesktop">

  <PropertyGroup>
    <OutputType>WinExe</OutputType>
    <TargetFramework>netcoreapp3.0</TargetFramework>
    <UseWindowsForms>true</UseWindowsForms>
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
    <AssemblyName>Au.Editor</AssemblyName>
    <RootNamespace>Au.Editor</RootNamespace>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <SignAssembly>true</SignAssembly>
    <AssemblyOriginatorKeyFile>..\Au.snk</AssemblyOriginatorKeyFile>
    <CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>
    <OutDir>$(SolutionDir)_</OutDir>
    <NoWin32Manifest>true</NoWin32Manifest>
    <NoWarn>1701;1702;3001,3002,3003,3009</NoWarn>
  </PropertyGroup>
  
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
    <DefineConstants>TRACE;DEBUG</DefineConstants>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
    <DefineConstants>TRACE</DefineConstants>
  </PropertyGroup>

  <ItemGroup>
    <Compile Remove="Default\files\Examples\Hotkeys and other triggers.cs" />
    <Compile Remove="Default\files\Examples\Script syntax and examples.cs" />
    <Compile Remove="Default\files\Script1.cs" />
    <Compile Remove="Default\Templates\Class.cs" />
    <Compile Remove="Default\Templates\New Project\@Library\!Library.cs" />
    <Compile Remove="Default\Templates\New Project\@Script\!Script.cs" />
    <Compile Remove="Default\Templates\Script.cs" />
  </ItemGroup>

  <ItemGroup>
    <None Remove="Tools\Keys.txt" />
    <None Remove="Tools\Regex.txt" />
  </ItemGroup>

  <ItemGroup>
    <None Include="Default\files\Examples\Hotkeys and other triggers.cs">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
    <None Include="Default\files\Examples\Script syntax and examples.cs">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
    <None Include="Default\files\Script1.cs">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
    <None Include="Default\Templates\Class.cs">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
    <None Include="Default\Templates\New Project\@Library\!Library.cs">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
    <None Include="Default\Templates\New Project\@Script\!Script.cs">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
    <None Include="Default\Templates\Script.cs">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
  </ItemGroup>

  <ItemGroup>
    <Content Include="Default\files.xml">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    <Content Include="Default\Panels.xml">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <SubType>Designer</SubType>
    </Content>
    <Content Include="Default\Strips.xml">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
      <SubType>Designer</SubType>
    </Content>
    <Content Include="Default\Templates\include\main.txt">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    <Content Include="Default\Templates\include\using.txt">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    <Content Include="Default\Templates\New File\TextFile.txt">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    <EmbeddedResource Include="Tools\Keys.txt" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\Libraries\_HtmlRenderer\_HtmlRenderer.csproj" />
    <ProjectReference Include="..\_Au\_Au.csproj" />
    <ProjectReference Include="..\_Au.Controls\_Au.Controls.csproj" />
    <ProjectReference Include="..\Libraries\_TreeList\_TreeList.csproj" />
    <ProjectReference Include="..\Libraries\_SourceGrid\_SourceGrid.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Reference Include="Microsoft.CodeAnalysis">
      <HintPath>..\Other\CompilerDlls\Microsoft.CodeAnalysis.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.CodeAnalysis.CSharp">
      <HintPath>..\Other\CompilerDlls\Microsoft.CodeAnalysis.CSharp.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.CodeAnalysis.CSharp.Features">
      <HintPath>..\Other\CompilerDlls\Microsoft.CodeAnalysis.CSharp.Features.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.CodeAnalysis.CSharp.Workspaces">
      <HintPath>..\Other\CompilerDlls\Microsoft.CodeAnalysis.CSharp.Workspaces.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.CodeAnalysis.Features">
      <HintPath>..\Other\CompilerDlls\Microsoft.CodeAnalysis.Features.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.CodeAnalysis.Workspaces">
      <HintPath>..\Other\CompilerDlls\Microsoft.CodeAnalysis.Workspaces.dll</HintPath>
    </Reference>
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Include="Tools\Regex.txt" />
  </ItemGroup>

  <ItemGroup>
    <Compile Update="Controls\ListControl.cs">
      <SubType>Component</SubType>
    </Compile>
    <Compile Update="Edit\PanelEdit.cs">
      <SubType>UserControl</SubType>
    </Compile>
    <Compile Update="Edit\SciCode.cs">
      <SubType>Component</SubType>
    </Compile>
    <Compile Update="Files\PanelFiles.cs">
      <SubType>UserControl</SubType>
    </Compile>
    <Compile Update="Panels\etc\FFindOptions.cs">
      <SubType>Form</SubType>
    </Compile>
    <Compile Update="Panels\PanelFind.cs">
      <SubType>UserControl</SubType>
    </Compile>
    <Compile Update="Panels\PanelFound.cs">
      <SubType>UserControl</SubType>
    </Compile>
    <Compile Update="Panels\PanelInfo.cs">
      <SubType>UserControl</SubType>
    </Compile>
    <Compile Update="Panels\PanelOpen.cs">
      <SubType>UserControl</SubType>
    </Compile>
    <Compile Update="Panels\PanelOutput.cs">
      <SubType>UserControl</SubType>
    </Compile>
    <Compile Update="Panels\PanelRunning.cs">
      <SubType>UserControl</SubType>
    </Compile>
    <Compile Update="Program\FMain.cs">
      <SubType>Form</SubType>
    </Compile>
    <Compile Update="Program\FOptions.cs">
      <SubType>Form</SubType>
    </Compile>
    <Compile Update="Program\FOptions.Designer.cs">
      <DependentUpon>FOptions.cs</DependentUpon>
    </Compile>
    <Compile Update="Program\FProperties.cs">
      <SubType>Form</SubType>
    </Compile>
    <Compile Update="Program\FProperties.Designer.cs">
      <DependentUpon>FProperties.cs</DependentUpon>
    </Compile>
    <Compile Update="Resources\Resources.Designer.cs">
      <DependentUpon>Resources.resx</DependentUpon>
      <DesignTime>True</DesignTime>
      <AutoGen>True</AutoGen>
    </Compile>
    <Compile Update="Tools\CodeBox.cs">
      <SubType>Component</SubType>
    </Compile>
    <Compile Update="Tools\FormAAcc.cs">
      <SubType>Form</SubType>
    </Compile>
    <Compile Update="Tools\FormAAcc.Designer.cs">
      <DependentUpon>FormAAcc.cs</DependentUpon>
    </Compile>
    <Compile Update="Tools\FormAWinImage.cs">
      <SubType>Form</SubType>
    </Compile>
    <Compile Update="Tools\FormAWinImage.Designer.cs">
      <DependentUpon>FormAWinImage.cs</DependentUpon>
    </Compile>
    <Compile Update="Tools\FormAWnd.cs">
      <SubType>Form</SubType>
    </Compile>
    <Compile Update="Tools\FormAWnd.Designer.cs">
      <DependentUpon>FormAWnd.cs</DependentUpon>
    </Compile>
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Update="Panels\etc\FFindOptions.resx">
      <DependentUpon>FFindOptions.cs</DependentUpon>
    </EmbeddedResource>
    <EmbeddedResource Update="Panels\PanelFind.resx">
      <DependentUpon>PanelFind.cs</DependentUpon>
    </EmbeddedResource>
    <EmbeddedResource Update="Program\FMain.resx">
      <DependentUpon>FMain.cs</DependentUpon>
    </EmbeddedResource>
    <EmbeddedResource Update="Program\FOptions.resx">
      <DependentUpon>FOptions.cs</DependentUpon>
    </EmbeddedResource>
    <EmbeddedResource Update="Resources\Resources.resx">
      <SubType>Designer</SubType>
      <LastGenOutput>Resources.Designer.cs</LastGenOutput>
      <Generator>ResXFileCodeGenerator</Generator>
    </EmbeddedResource>
    <EmbeddedResource Update="Tools\FormAAcc.resx">
      <DependentUpon>FormAAcc.cs</DependentUpon>
    </EmbeddedResource>
    <EmbeddedResource Update="Tools\FormAWinImage.resx">
      <DependentUpon>FormAWinImage.cs</DependentUpon>
    </EmbeddedResource>
    <EmbeddedResource Update="Tools\FormAWnd.resx">
      <DependentUpon>FormAWnd.cs</DependentUpon>
    </EmbeddedResource>
  </ItemGroup>

  <Target Name="PreBuild" BeforeTargets="PreBuildEvent">
    <Exec Command="$(TargetDir)kill_Au.Editor.exe&#xD;&#xA;" />
  </Target>

  <Target Name="PostBuild" AfterTargets="PostBuildEvent">
    <Exec Command="cd $(TargetDir)&#xD;&#xA;&quot;$(SolutionDir)Other\Programs\ResourceHacker.exe&quot; -script &quot;$(ProjectDir)Resources\hacker.txt&quot;&#xD;&#xA;::&quot;$(SolutionDir)Other\Programs\ResourceHacker.exe&quot; -script &quot;$(ProjectDir)Resources\hacker32.txt&quot;&#xD;&#xA;del &quot;$(TargetDir)$(TargetName).*.json&quot;&#xD;&#xA;" />
  </Target>

</Project>
